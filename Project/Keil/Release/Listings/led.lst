C51 COMPILER V9.60.7.0   LED                                                               02/19/2025 14:55:10 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Release\Objects\led.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\Hardware\led.c OPTIMIZE(9,SIZE) BROWSE INTVECTOR(0X8000) INCDIR(..
                    -\..\Libraries\Include;..\..\User;..\..\Hardware;..\..\App) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release\Listings\led.l
                    -st) OBJECT(.\Release\Objects\led.obj)

line level    source

   1          #include "led.h"
*** WARNING C322 IN LINE 71 OF \BaiduSyncdisk\A_WorkSt\Aworkst\2025-01-22-project250122-À’–¿-∞¥ƒ¶“«”Ô“ÙøÓ-SX384\code\pro
             -ject-250122-TX8C1011\Libraries\Include\debug.h: unknown identifier
   2          
   3          // 20KHz
   4          // #define STMR2_PRE (SYSCLK / 1 / (20000 - 100) - 1) // ÂÄº == 1608
   5          
   6          volatile u8 cur_sel_led = CUR_SEL_LED_NONE;
   7          volatile u8 cur_ctl_led_blink_cnt = CUR_CTL_LED_BLINK_NONE; // ËÆ∞ÂΩïÂΩìÂâçË¶ÅÊéßÂà∂ÁÅØÂÖâÈó™ÁÉÅÁöÑÊ¨°Êï∞
   8          
   9          void led_config(void)
  10          {
  11   1      #if 0
                  // LEDÂºïËÑöÈÖçÁΩÆ‰∏∫ËæìÂá∫Ê®°Âºè
                  P1_MD0 |= 0x01 << 4; // P12
                  // P1_MD0 |= 0x01 << 6; // P13
                  P0_MD1 |= 0x01 << 2; // P05
              #endif
  17   1      
  18   1          // P12„ÄÅP13ÂØπÂ∫îÁöÑLEDÈÉΩ‰ΩøÁî®PWMÊù•È©±Âä®
  19   1          P1_MD0 |= 0xA0; // P12„ÄÅP13ÈÉΩÈÖçÁΩÆ‰∏∫Â§öÂäüËÉΩIOÊ®°Âºè
  20   1          // P1_AF0 &= ~(0x0F); // (ÂèØ‰ª•‰∏çÂÜôÔºåÈªòËÆ§Â∞±ÊòØ0)P12Â§çÁî®‰∏∫ STMR2_CHB „ÄÅP13Â§çÁî®‰∏∫ STMR2_CH
             -A
  21   1      
  22   1          // ÈÖçÁΩÆSTIMER1
  23   1          STMR2_FCONR = 0x00;          // ÈÄâÊã©Á≥ªÁªüÊó∂ÈíüÔºå0ÂàÜÈ¢ë
  24   1          STMR2_PRH = STMR2_PRE / 256; // Âë®ÊúüÂÄº
  25   1          STMR2_PRL = STMR2_PRE % 256;
  26   1          // Âç†Á©∫ÊØîÈªòËÆ§‰∏∫0Ôºå‰∏çÁÇπ‰∫ÆLED
  27   1          // STMR2_CMPAH = STMR2_PRE / 2 / 256; // ÈÄöÈÅìAÂç†Á©∫ÊØî
  28   1          // STMR2_CMPAL = STMR2_PRE / 2 % 256;
  29   1          // STMR2_CMPBH = STMR2_PRE / 4 / 256; // ÈÄöÈÅìBÂç†Á©∫ÊØî
  30   1          // STMR2_CMPBL = STMR2_PRE / 4 % 256;
  31   1      
  32   1          STMR2_PCONRA = 0x10; // ‰ΩøËÉΩCHAÔºåËÆ°Êï∞ÂÄºÂ§ß‰∫éCHAÊØîËæÉÂÄºËæìÂá∫0ÔºåÂ∞è‰∫éËæìÂá∫1
  33   1          STMR2_PCONRB = 0x10; // ‰ΩøËÉΩCHBÔºåËÆ°Êï∞ÂÄºÂ§ß‰∫éCHAÊØîËæÉÂÄºËæìÂá∫0ÔºåÂ∞è‰∫éËæìÂá∫1
  34   1          STMR2_CR |= 0x01;    // ‰ΩøËÉΩÈ´òÁ∫ßÂÆöÊó∂Âô®
  35   1      }
  36          
  37          void led_red_on(void)
  38          {
  39   1      #ifdef USE_P13_RLED_USE_P12_GLED
  40   1          P1_MD0 &= ~(0x03 << 6);
  41   1          P1_MD0 |= 0x02 << 6;                 // Â§öÂäüËÉΩIOÊ®°Âºè
  42   1          P1_AF0 &= ~(0x03 << 6);              // Â§çÁî®‰∏∫ STMR2_CHA
  43   1          STMR2_CMPAH = (STMR2_PRE + 1) / 256; // ÈÄöÈÅìAÂç†Á©∫ÊØî  100%
  44   1          STMR2_CMPAL = (STMR2_PRE + 1) % 256; 
  45   1      #endif
  46   1      
  47   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 4);
                  P1_MD0 |= 0x02 << 4;                 // Â§öÂäüËÉΩIOÊ®°Âºè
                  P1_AF0 &= ~(0x03 << 4);              // Â§çÁî®‰∏∫ STMR2_CHB
C51 COMPILER V9.60.7.0   LED                                                               02/19/2025 14:55:10 PAGE 2   

                  STMR2_CMPBH = (STMR2_PRE + 1) / 256; // ÈÄöÈÅìBÂç†Á©∫ÊØî  100%
                  STMR2_CMPBL = (STMR2_PRE + 1) % 256;
              #endif
  54   1      }
  55          
  56          void led_red_off(void)
  57          {
  58   1      #ifdef USE_P13_RLED_USE_P12_GLED
  59   1          P1_MD0 &= ~(0x03 << 6);
  60   1          P1_MD0 |= 0x01 << 6; // ËæìÂá∫Ê®°Âºè
  61   1          P13 = 0;             // ËæìÂá∫‰ΩéÁîµÂπ≥
  62   1      #endif
  63   1      
  64   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 4);
                  P1_MD0 |= 0x01 << 4; // ËæìÂá∫Ê®°Âºè
                  P12 = 0;             // ËæìÂá∫‰ΩéÁîµÂπ≥
              #endif
  69   1      }
  70          
  71          void led_green_on(void)
  72          {
  73   1      #ifdef USE_P13_RLED_USE_P12_GLED 
  74   1          P1_MD0 &= ~(0x03 << 4);
  75   1          P1_MD0 |= 0x02 << 4;                 // Â§öÂäüËÉΩIOÊ®°Âºè
  76   1          P1_AF0 &= ~(0x03 << 4);              // Â§çÁî®‰∏∫ STMR2_CHB
  77   1          STMR2_CMPBH = (STMR2_PRE + 1) / 256; // ÈÄöÈÅìBÂç†Á©∫ÊØî  100%
  78   1          STMR2_CMPBL = (STMR2_PRE + 1) % 256;
  79   1      #endif
  80   1      
  81   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 6);
                  P1_MD0 |= 0x02 << 6;                 // Â§öÂäüËÉΩIOÊ®°Âºè
                  P1_AF0 &= ~(0x03 << 6);              // Â§çÁî®‰∏∫ STMR2_CHA
                  STMR2_CMPAH = (STMR2_PRE + 1) / 256; // ÈÄöÈÅìAÂç†Á©∫ÊØî  100%
                  STMR2_CMPAL = (STMR2_PRE + 1) % 256; 
              #endif
  88   1      }
  89          
  90          void led_green_off(void)
  91          {
  92   1      #ifdef USE_P13_RLED_USE_P12_GLED 
  93   1          P1_MD0 &= ~(0x03 << 4);
  94   1          P1_MD0 |= 0x01 << 4; // ËæìÂá∫Ê®°Âºè
  95   1          P12 = 0;             // ËæìÂá∫‰ΩéÁîµÂπ≥
  96   1      #endif
  97   1      
  98   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 6);
                  P1_MD0 |= 0x01 << 6; // ËæìÂá∫Ê®°Âºè
                  P13 = 0;             // ËæìÂá∫‰ΩéÁîµÂπ≥
              #endif
 103   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     97    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.60.7.0   LED                                                               02/19/2025 14:55:10 PAGE 3   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
