C51 COMPILER V9.60.7.0   LED                                                               02/28/2025 10:26:49 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LED
OBJECT MODULE PLACED IN .\Release\Objects\led.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\Hardware\led.c OPTIMIZE(9,SIZE) BROWSE INTVECTOR(0X8000) INCDIR(..
                    -\..\Libraries\Include;..\..\User;..\..\Hardware;..\..\App) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release\Listings\led.l
                    -st) OBJECT(.\Release\Objects\led.obj)

line level    source

   1          #include "led.h"
*** WARNING C322 IN LINE 71 OF \BaiduSyncdisk\A_WorkSt\Aworkst\2025-01-22-project250122-ËÕĞÀ-°´Ä¦ÒÇÓïÒô¿î-SX384\code\pro
             -ject-250122-TX8C1011\Libraries\Include\debug.h: unknown identifier
   2          
   3          // 20KHz
   4          // #define STMR2_PRE (SYSCLK / 1 / (20000 - 100) - 1) // å€¼ == 1608
   5          
   6          // volatile u8 cur_sel_led = CUR_SEL_LED_NONE;
   7          // volatile u8 cur_ctl_led_blink_cnt = CUR_CTL_LED_BLINK_NONE; // è®°å½•å½“å‰è¦æ§åˆ¶ç¯å…‰é—ªçƒçš„æ¬¡æ
             -•°
   8          volatile u8 cur_sel_led;           // é»˜è®¤å°±æ˜¯ CUR_SEL_LED_NONE
   9          volatile u8 cur_ctl_led_blink_cnt; // è®°å½•å½“å‰è¦æ§åˆ¶ç¯å…‰é—ªçƒçš„æ¬¡æ•°ï¼Œé»˜è®¤å°±æ˜¯ CUR_CTL_LE
             -D_BLINK_NONE
  10          
  11          extern volatile bit flag_ctl_led_blink; // æ§åˆ¶æ ‡å¿—ä½ï¼Œæ˜¯å¦æ§åˆ¶æŒ‡ç¤ºç¯é—ªçƒ
  12          
  13          // void led_config(void)
  14          // {
  15          //     // P12ã€P13å¯¹åº”çš„LEDéƒ½ä½¿ç”¨PWMæ¥é©±åŠ¨
  16          //     P1_MD0 |= 0xA0; // P12ã€P13éƒ½é…ç½®ä¸ºå¤šåŠŸèƒ½IOæ¨¡å¼
  17          //     // P1_AF0 &= ~(0x0F); // (å¯ä»¥ä¸å†™ï¼Œé»˜è®¤å°±æ˜¯0)P12å¤ç”¨ä¸º STMR2_CHB ã€P13å¤ç”¨ä¸º STMR2
             -_CHA
  18          
  19          //     // é…ç½®STIMER1
  20          //     STMR2_FCONR = 0x00;          // é€‰æ‹©ç³»ç»Ÿæ—¶é’Ÿï¼Œ0åˆ†é¢‘
  21          //     STMR2_PRH = STMR2_PRE / 256; // å‘¨æœŸå€¼
  22          //     STMR2_PRL = STMR2_PRE % 256;
  23          //     // å ç©ºæ¯”é»˜è®¤ä¸º0ï¼Œä¸ç‚¹äº®LED
  24          //     // STMR2_CMPAH = STMR2_PRE / 2 / 256; // é€šé“Aå ç©ºæ¯”
  25          //     // STMR2_CMPAL = STMR2_PRE / 2 % 256;
  26          //     // STMR2_CMPBH = STMR2_PRE / 4 / 256; // é€šé“Bå ç©ºæ¯”
  27          //     // STMR2_CMPBL = STMR2_PRE / 4 % 256;
  28          
  29          //     STMR2_PCONRA = 0x10; // ä½¿èƒ½CHAï¼Œè®¡æ•°å€¼å¤§äºCHAæ¯”è¾ƒå€¼è¾“å‡º0ï¼Œå°äºè¾“å‡º1
  30          //     STMR2_PCONRB = 0x10; // ä½¿èƒ½CHBï¼Œè®¡æ•°å€¼å¤§äºCHAæ¯”è¾ƒå€¼è¾“å‡º0ï¼Œå°äºè¾“å‡º1
  31          //     STMR2_CR |= 0x01;    // ä½¿èƒ½é«˜çº§å®šæ—¶å™¨
  32          // }
  33          
  34          // æ‰“æ–­LEDé—ªçƒ
  35          void interrupt_led_blink(void)
  36          {
  37   1          flag_ctl_led_blink = 0;
  38   1          delay_ms(1);
  39   1      }
  40          
  41          void led_red_on(void)
  42          {
  43   1      #ifdef USE_P13_RLED_USE_P12_GLED
  44   1          P1_MD0 &= ~(0x03 << 6);
  45   1          P1_MD0 |= 0x02 << 6;                 // å¤šåŠŸèƒ½IOæ¨¡å¼
  46   1          P1_AF0 &= ~(0x03 << 6);              // å¤ç”¨ä¸º STMR2_CHA
  47   1          STMR2_CMPAH = (STMR2_PRE + 1) / 256; // é€šé“Aå ç©ºæ¯”  100%
  48   1          STMR2_CMPAL = (STMR2_PRE + 1) % 256;
C51 COMPILER V9.60.7.0   LED                                                               02/28/2025 10:26:49 PAGE 2   

  49   1      #endif
  50   1      
  51   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 4);
                  P1_MD0 |= 0x02 << 4;                 // å¤šåŠŸèƒ½IOæ¨¡å¼
                  P1_AF0 &= ~(0x03 << 4);              // å¤ç”¨ä¸º STMR2_CHB
                  STMR2_CMPBH = (STMR2_PRE + 1) / 256; // é€šé“Bå ç©ºæ¯”  100%
                  STMR2_CMPBL = (STMR2_PRE + 1) % 256;
              #endif
  58   1      }
  59          
  60          void led_red_off(void)
  61          {
  62   1      #ifdef USE_P13_RLED_USE_P12_GLED
  63   1          P1_MD0 &= ~(0x03 << 6);
  64   1          P1_MD0 |= 0x01 << 6; // è¾“å‡ºæ¨¡å¼
  65   1          P13 = 0;             // è¾“å‡ºä½ç”µå¹³
  66   1      #endif
  67   1      
  68   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 4);
                  P1_MD0 |= 0x01 << 4; // è¾“å‡ºæ¨¡å¼
                  P12 = 0;             // è¾“å‡ºä½ç”µå¹³
              #endif
  73   1      }
  74          
  75          void led_green_on(void)
  76          {
  77   1      #ifdef USE_P13_RLED_USE_P12_GLED
  78   1          P1_MD0 &= ~(0x03 << 4);
  79   1          P1_MD0 |= 0x02 << 4;                 // å¤šåŠŸèƒ½IOæ¨¡å¼
  80   1          P1_AF0 &= ~(0x03 << 4);              // å¤ç”¨ä¸º STMR2_CHB
  81   1          STMR2_CMPBH = (STMR2_PRE + 1) / 256; // é€šé“Bå ç©ºæ¯”  100%
  82   1          STMR2_CMPBL = (STMR2_PRE + 1) % 256;
  83   1      #endif
  84   1      
  85   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 6);
                  P1_MD0 |= 0x02 << 6;                 // å¤šåŠŸèƒ½IOæ¨¡å¼
                  P1_AF0 &= ~(0x03 << 6);              // å¤ç”¨ä¸º STMR2_CHA
                  STMR2_CMPAH = (STMR2_PRE + 1) / 256; // é€šé“Aå ç©ºæ¯”  100%
                  STMR2_CMPAL = (STMR2_PRE + 1) % 256;
              #endif
  92   1      }
  93          
  94          void led_green_off(void)
  95          {
  96   1      #ifdef USE_P13_RLED_USE_P12_GLED
  97   1          P1_MD0 &= ~(0x03 << 4);
  98   1          P1_MD0 |= 0x01 << 4; // è¾“å‡ºæ¨¡å¼
  99   1          P12 = 0;             // è¾“å‡ºä½ç”µå¹³
 100   1      #endif
 101   1      
 102   1      #ifdef USE_P12_RLED_USE_P13_GLED
                  P1_MD0 &= ~(0x03 << 6);
                  P1_MD0 |= 0x01 << 6; // è¾“å‡ºæ¨¡å¼
                  P13 = 0;             // è¾“å‡ºä½ç”µå¹³
              #endif
 107   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.60.7.0   LED                                                               02/28/2025 10:26:49 PAGE 3   

   CODE SIZE        =     81    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
