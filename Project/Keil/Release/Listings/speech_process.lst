C51 COMPILER V9.60.7.0   SPEECH_PROCESS                                                    04/29/2025 15:04:12 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SPEECH_PROCESS
OBJECT MODULE PLACED IN .\Release\Objects\speech_process.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\..\App\speech_process.c OPTIMIZE(9,SIZE) BROWSE INTVECTOR(0X8000) INC
                    -DIR(..\..\Libraries\Include;..\..\User;..\..\Hardware;..\..\App) INTERVAL(3) DEBUG OBJECTEXTEND PRINT(.\Release\Listings
                    -\speech_process.lst) OBJECT(.\Release\Objects\speech_process.obj)

line level    source

   1          #include "speech_process.h"
*** WARNING C322 IN LINE 71 OF \BaiduSyncdisk\A_WorkSt\Aworkst\2025-01-22-project250122-ËÕĞÀ-°´Ä¦ÒÇÓïÒô¿î-SX384\code\pro
             -ject-250122-TX8C1011\Libraries\Include\debug.h: unknown identifier
   2          
   3          extern volatile bit flag_is_recv_ctl; // æ ‡å¿—ä½ï¼Œæ˜¯å¦æ¥æ”¶äº†æ§åˆ¶å‘½ä»¤
   4          
   5          extern volatile bit flag_tim_set_bat_is_low; // ç”±å®šæ—¶å™¨ç½®ä½/å¤ä½çš„ï¼Œè¡¨ç¤ºåœ¨å·¥ä½œæ—¶ï¼Œç”µæ± 
             -æ˜¯å¦å¤„äºä½ç”µé‡çš„æ ‡å¿—ä½
   6          extern volatile bit flag_ctl_led_blink;      // æ§åˆ¶æ ‡å¿—ä½ï¼Œæ˜¯å¦æ§åˆ¶æŒ‡ç¤ºç¯é—ªçƒ
   7          extern volatile bit flag_ctl_turn_dir;       // æ§åˆ¶æ ‡å¿—ä½ï¼Œæ˜¯å¦æ›´æ¢ç”µæœºçš„æ–¹å‘
   8          
   9          /*
  10              æ ‡å¿—ä½ï¼Œæ˜¯å¦é€šè¿‡è¯­éŸ³æ¥åˆ‡æ¢æ–¹å‘.
  11              ç”¨åœ¨å®šæ—¶å™¨ä¸­æ–­ä¸­ï¼Œåˆ¤æ–­è‡ªåŠ¨æ¢æ–¹å‘ï¼Œå¦‚æœè¿™ä¸ªæ ‡å¿—ä½ç½®ä¸€ï¼Œ
  12              ä¼šæ¸…é™¤å½“å‰è‡ªåŠ¨æ¢æ–¹å‘çš„è®¡æ—¶ï¼Œé‡æ–°å¼€å§‹è‡ªåŠ¨æ¢æ–¹å‘çš„è®¡æ—¶
  13          */
  14          extern volatile bit flag_is_turn_dir_by_speech;
  15          
  16          /*
  17              æ ‡å¿—ä½ï¼Œæ˜¯å¦æ¥æ”¶åˆ°äº†æ–°çš„è¯­éŸ³ä¿¡æ¯/æœ‰æ–°çš„æŒ‰é”®æ“ä½œ
  18              ç”¨åœ¨å®šæ—¶å™¨ä¸­æ–­ï¼Œåœ¨é€šè¿‡è¯­éŸ³å…³é—­è®¾å¤‡åï¼Œä¸€æ®µæ—¶é—´æ— æ“ä½œè€Œå½»åº•å…³æœº
  19              å¦‚æœè¿™ä¸ªæ ‡å¿—ä½ç½®ä¸€ï¼Œåœ¨å®šæ—¶å™¨å†…ä¼šæ¸…é™¤è‡ªåŠ¨å½»åº•å…³æœºçš„å€’è®¡æ—¶ï¼Œ
  20              å®šæ—¶å™¨åœ¨æ¸…é™¤è®¡æ—¶åï¼Œä¼šç»™è¿™ä¸ªæ ‡å¿—ä½æ¸…é›¶
  21          */
  22          extern volatile bit flag_is_new_operation;
  23          
  24          extern volatile bit flag_ctl_low_bat_alarm; // æ§åˆ¶æ ‡å¿—ä½ï¼Œæ˜¯å¦ä½¿èƒ½ä½ç”µé‡æŠ¥è­¦
  25          
  26          extern void fun_ctl_motor_status(u8 adjust_motor_status);
  27          extern void fun_ctl_heat_status(u8 adjust_heat_status);
  28          
  29          // åˆå§‹åŒ–æ§åˆ¶è¯­éŸ³ICç”µæºçš„å¼•è„š
  30          // void speech_ctl_pin_config(void)
  31          // {
  32          //     // P11
  33          //     P1_MD0 |= 0x01 << 2; // è¾“å‡ºæ¨¡å¼
  34          // }
  35          
  36          void speech_scan_process(void)
  37          {
  38   1          if (flag_is_recv_ctl) // å¦‚æœæ¥æ”¶åˆ°äº†æ­£ç¡®çš„æ§åˆ¶å‘½ä»¤
  39   1          {
  40   2              volatile u8 cmd = recv_ctl; // ä»ç¼“å†²åŒºå–å‡ºæ§åˆ¶å‘½å
  41   2              flag_is_recv_ctl = 0;
  42   2      
  43   2              // è¡¨ç¤ºæœ‰æ–°çš„æ§åˆ¶å‘½ä»¤ï¼Œæ¸…é™¤åœ¨å…³é—­æŒ‰æ‘©æŒ‡ä»¤åï¼Œæ— æ“ä½œè‡ªåŠ¨å…³æœºçš„å€’è®¡æ—
             -¶
  44   2              flag_is_new_operation = 1;
  45   2              delay_ms(1); // ç­‰å¾…å®šæ—¶å™¨æ¸…ç©ºå¯¹åº”çš„ï¼ˆ2minæ²¡æœ‰è¯­éŸ³æ“ä½œè€Œå…³æœºï¼‰è®¡æ—¶å˜é‡å’Œ
             -æ ‡å¿—ä½
  46   2      
  47   2              // æ ¹æ®å½“å‰è®¾å¤‡çš„æƒ…å†µï¼Œå¯¹æŒ‡ä»¤è¿›è¡Œå¤„ç†
  48   2              if (CMD_OPEN_DEV == cmd) // æ‰“å¼€æŒ‰æ‘©/æŒ‰æ‘©æ•/æŒ‰æ‘©å™¨
C51 COMPILER V9.60.7.0   SPEECH_PROCESS                                                    04/29/2025 15:04:12 PAGE 2   

  49   2              {
  50   3                  // å¦‚æœå½“å‰ç”µæœºæ˜¯å…³é—­çš„ï¼Œæ‰å¯¹ å¼€æœºæ§åˆ¶å‘½ä»¤è¿›è¡Œå¤„ç†
  51   3                  if (0 == cur_motor_status)
  52   3                  {
  53   4                      alter_motor_speed(2); // å¼€æœºåï¼Œç”µæœºè¿›å…¥äºŒæ¡£
  54   4                      motor_pwm_b_enable(); // ç”µæœºæ­£å‘è½¬åŠ¨
  55   4                      cur_motor_dir = 1;    // è¡¨ç¤ºå½“å‰ç”µæœºåœ¨æ­£è½¬
  56   4                      cur_motor_status = 2; // æ›´æ–°ç”µæœºæŒ¡ä½çŠ¶æ€
  57   4                      fun_enable_led_blink(cur_motor_status);
  58   4                      // fun_enable_led_blink(2);
  59   4                  }
  60   3                  else
  61   3                  {
  62   4                      // ç”µæœºæ­£åœ¨è¿è¡Œï¼Œä¸åšå¤„ç†
  63   4                  }
  64   3              }
  65   2              else if (CMD_CLOSE_DEV == cmd) // å…³é—­æŒ‰æ‘©/æŒ‰æ‘©æ•/æŒ‰æ‘©å™¨
  66   2              {
  67   3                  cur_ctl_heat_status = 0; // å…³é—­åŠ çƒ­
  68   3                  motor_pwm_disable();     // å…³é—­é©±åŠ¨ç”µæœºçš„PWMè¾“å‡ºï¼š
  69   3                  LED_RED_OFF();
  70   3                  interrupt_led_blink(); // å…³é—­ç¯å…‰é—ªçƒçš„åŠ¨ç”»
  71   3                  LED_GREEN_ON();        // ç‚¹äº®ç»¿ç¯
  72   3                  delay_ms(100);
  73   3                  cur_sel_led = CUR_SEL_LED_GREEN;             // é€‰ä¸­ç»¿ç¯ï¼Œå‡†å¤‡è®©å®ƒé—ªçƒ
  74   3                  cur_ctl_led_blink_cnt = CUR_CTL_LED_BLINK_1; // é—ªçƒä¸€æ¬¡
  75   3                  flag_ctl_led_blink = 1;                      // ä½¿èƒ½ç¯å…‰é—ªçƒ
  76   3              }
  77   2              else if (CMD_OPEN_HEAT == cmd) // æ‰“å¼€åŠ çƒ­
  78   2              {
  79   3                  if (0 == cur_ctl_heat_status && cur_motor_status) /* å¦‚æœåŠ çƒ­å…³é—­ï¼Œå¹¶ä¸”ç”µæœºæ­£åœ¨è¿
             -è¡Œ */
  80   3                  {
  81   4                      // å¦‚æœåŠ çƒ­æ²¡æœ‰å¼€å¯
  82   4                      // å‚æ•°å¡«0ï¼Œæ ¹æ®å…¨å±€å˜é‡ cur_ctl_heat_status çš„çŠ¶æ€æ¥è‡ªåŠ¨è°ƒèŠ‚
  83   4                      fun_ctl_heat_status(0);
  84   4                  }
  85   3              }
  86   2      #if 1
  87   2              else if (CMD_CLOSE_HEAT == cmd) // å…³é—­åŠ çƒ­
  88   2              {
  89   3                  if (0 != cur_ctl_heat_status)
  90   3                  {
  91   4                      // å¦‚æœåŠ çƒ­å·²ç»å¼€å¯
  92   4                      // flag_ctl_led_blink = 0; // æ‰“æ–­å½“å‰æ­£åœ¨é—ªçƒçš„åŠŸèƒ½
  93   4                      // delay_ms(1);            // ç­‰å¾…å®šæ—¶å™¨ä¸­æ–­å†…éƒ¨æ¸…ç©ºé—ªçƒåŠŸèƒ½å¯¹åº”çš„æ ‡å¿—
             -å’Œå˜é‡ï¼Œå¦åˆ™æ‰“æ–­é—ªç¯çš„æ•ˆæœä¼šå˜å·®
  94   4                      interrupt_led_blink();
  95   4                      fun_ctl_close_heat();
  96   4                      delay_ms(100);
  97   4                      cur_sel_led = CUR_SEL_LED_GREEN;
  98   4                      cur_ctl_led_blink_cnt = 1;
  99   4                      flag_ctl_led_blink = 1;
 100   4                  }
 101   3              }
 102   2              else if (CMD_HEAT_FIRST == cmd) // åŠ çƒ­ä¸€æ¡£
 103   2              {
 104   3                  if (0 != cur_ctl_heat_status)
 105   3                  {
 106   4                      fun_ctl_heat_status(1);
 107   4                  }
 108   3              }
C51 COMPILER V9.60.7.0   SPEECH_PROCESS                                                    04/29/2025 15:04:12 PAGE 3   

 109   2              else if (CMD_HEAT_SECOND == cmd) // åŠ çƒ­äºŒæ¡£
 110   2              {
 111   3                  if (0 != cur_ctl_heat_status)
 112   3                  {
 113   4                      fun_ctl_heat_status(2);
 114   4                  }
 115   3              }
 116   2      #else // ä¸‹é¢çš„è¯­å¥å—ä¼šæ›´å ç©ºé—´
                      else if (cmd >= CMD_CLOSE_HEAT && cmd <= CMD_HEAT_SECOND)
                      {
                          if (0 != cur_ctl_heat_status)
                          {
                              // switch (cmd)
                              // {
                              // case CMD_CLOSE_HEAT:       // å…³é—­åŠ çƒ­
                              //                            // å¦‚æœåŠ çƒ­å·²ç»å¼€å¯
                              //     interrupt_led_blink(); // æ‰“æ–­å½“å‰æ­£åœ¨é—ªçƒçš„åŠŸèƒ½
                              //     fun_ctl_close_heat();
                              //     delay_ms(100);
                              //     cur_sel_led = CUR_SEL_LED_GREEN;
                              //     cur_ctl_led_blink_cnt = 1;
                              //     flag_ctl_led_blink = 1;
                              //     break;
              
                              // case CMD_HEAT_FIRST: // åŠ çƒ­ä¸€æ¡£
                              //     fun_ctl_heat_status(1);
                              //     break;
              
                              // case CMD_HEAT_SECOND: // åŠ çƒ­äºŒæ¡£
                              //     fun_ctl_heat_status(2);
                              //     break;
                              // }
              
                              if (CMD_CLOSE_HEAT == cmd) // å…³é—­åŠ çƒ­
                              {
                                  // å¦‚æœåŠ çƒ­å·²ç»å¼€å¯
                                  // flag_ctl_led_blink = 0; // æ‰“æ–­å½“å‰æ­£åœ¨é—ªçƒçš„åŠŸèƒ½
                                  // delay_ms(1);            // ç­‰å¾…å®šæ—¶å™¨ä¸­æ–­å†…éƒ¨æ¸…ç©ºé—ªçƒåŠŸèƒ½å¯¹åº”çš„æ 
             -‡å¿—å’Œå˜é‡ï¼Œå¦åˆ™æ‰“æ–­é—ªç¯çš„æ•ˆæœä¼šå˜å·®
                                  interrupt_led_blink();
                                  fun_ctl_close_heat();
                                  delay_ms(100);
                                  cur_sel_led = CUR_SEL_LED_GREEN;
                                  cur_ctl_led_blink_cnt = 1;
                                  flag_ctl_led_blink = 1;
                              }
                              else if (CMD_HEAT_FIRST == cmd) // åŠ çƒ­ä¸€æ¡£
                              {
                                  fun_ctl_heat_status(1);
                              }
                              // else if (CMD_HEAT_SECOND == cmd) // åŠ çƒ­äºŒæ¡£
                              else // åŠ çƒ­äºŒæ¡£
                              {
                                  fun_ctl_heat_status(2);
                              }
                          }
                      }
              #endif
 166   2              else if (cur_motor_status) /* æ¥ä¸‹æ¥éƒ½æ˜¯ä¸ç”µæœºæœ‰å…³çš„æ“ä½œï¼Œéœ€è¦ç”µæœºåœ¨è¿ä½œçš„æƒ
             -…å†µä¸‹ï¼Œå†åšå¤„ç†ï¼Œå¦åˆ™ä¸ä¼šè¿›å…¥ */
 167   2              {
 168   3      #if 0
C51 COMPILER V9.60.7.0   SPEECH_PROCESS                                                    04/29/2025 15:04:12 PAGE 4   

                          if (CMD_INTENSITY_FIRST == cmd) // åŠ›åº¦ä¸€æ¡£
                          {
                              fun_ctl_motor_status(1);
                          }
                          else if (CMD_INTENSITY_SECOND == cmd) // åŠ›åº¦äºŒæ¡£
                          {
                              fun_ctl_motor_status(2);
                          }
                          else if (CMD_INTENSITY_THIRD == cmd) // åŠ›åº¦ä¸‰æ¡£
                          {
                              fun_ctl_motor_status(3);
                          }
                          else if (CMD_CHANGE_DIR == cmd) // æ¢ä¸ªæ–¹å‘
                          {
                              // æ ‡å¿—ä½ç½®ä¸€ï¼Œè®©æ¢æ–¹å‘çš„æ“ä½œåœ¨ä¸»å‡½æ•°æ‰§è¡Œï¼Œå› ä¸ºæ¢æ–¹å‘è¦é—´éš”500
             -ms
                              flag_ctl_turn_dir = 1;
                              // ç»™å¦å¤–ä¸€ä¸ªæ ‡å¿—ä½ç½®ä¸€ï¼Œè®©å®šæ—¶å™¨æ¸…é™¤è‡ªåŠ¨æ¢æ–¹å‘çš„è®¡æ—¶
                              flag_is_turn_dir_by_speech = 1;
                              interrupt_led_blink(); // æ‰“æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„LEDé—ªçƒåŠŸèƒ½
                              fun_enable_led_blink(1); // ä½¿èƒ½LEDé—ªçƒï¼ŒæŒ‡å®šLEDé—ªçƒä¸€æ¬¡
                          }
              #endif
 191   3      
 192   3                  switch (cmd)
 193   3                  {
 194   4                  case CMD_INTENSITY_FIRST: // åŠ›åº¦ä¸€æ¡£
 195   4                      fun_ctl_motor_status(1);
 196   4                      break;
 197   4      
 198   4                  case CMD_INTENSITY_SECOND: // åŠ›åº¦äºŒæ¡£
 199   4                      fun_ctl_motor_status(2);
 200   4                      break;
 201   4      
 202   4                  case CMD_INTENSITY_THIRD: // åŠ›åº¦ä¸‰æ¡£
 203   4                      fun_ctl_motor_status(3);
 204   4                      break;
 205   4      
 206   4                  case CMD_CHANGE_DIR: // æ¢ä¸ªæ–¹å‘
 207   4                      // æ ‡å¿—ä½ç½®ä¸€ï¼Œè®©æ¢æ–¹å‘çš„æ“ä½œåœ¨ä¸»å‡½æ•°æ‰§è¡Œï¼Œå› ä¸ºæ¢æ–¹å‘è¦é—´éš”500
             -ms
 208   4                      flag_ctl_turn_dir = 1;
 209   4                      // ç»™å¦å¤–ä¸€ä¸ªæ ‡å¿—ä½ç½®ä¸€ï¼Œè®©å®šæ—¶å™¨æ¸…é™¤è‡ªåŠ¨æ¢æ–¹å‘çš„è®¡æ—¶
 210   4                      flag_is_turn_dir_by_speech = 1;
 211   4                      interrupt_led_blink();   // æ‰“æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„LEDé—ªçƒåŠŸèƒ½
 212   4                      fun_enable_led_blink(1); // ä½¿èƒ½LEDé—ªçƒï¼ŒæŒ‡å®šLEDé—ªçƒä¸€æ¬¡
 213   4                      break;
 214   4                  }
 215   3              }
 216   2          }
 217   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.60.7.0   SPEECH_PROCESS                                                    04/29/2025 15:04:12 PAGE 5   


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
